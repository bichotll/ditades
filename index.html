<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Finger fight</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le styles -->
    <link href="src/css/0.css" rel="stylesheet">
    <link href="src/css/1.css" rel="stylesheet">

  </head>

  <body>

    <div id="p_ply0" class="p_ply" >&nbsp;</div>
    <div id="p_ply1" class="p_ply" >&nbsp;</div>

    <script src="src/js/zepto.js"></script>
    <script>

    var game;

    player = function(){
      var height;
      var width;
    }

    var ply = {};
    ply[0] = new player();
    ply[1] = new player();

    //init
    function init(){
      game = true;
 
      ply[0].height = 100;
      ply[1].height = 100;
      ply[0].width = 50;
      ply[1].width = 50;

      $('#p_ply0').css('width', ply[0].width + '%');
      $('#p_ply1').css('width', ply[1].width + '%');
      $('#p_ply0').css('height', ply[0].height + '%');
      $('#p_ply1').css('height', ply[1].height + '%');
    }
    //ditada
    function ditada(element){
      n_ply = parseInt(element.attr('id').replace('p_ply', ''));

      ply[n_ply].width += 2.5;
      t_width = $('#p_ply' + n_ply).css('width', ply[n_ply].width + '%');

      n_ply = (n_ply+1)%2;
      
      ply[n_ply].width -= 2.5;
      t_width = $('#p_ply' + n_ply).css('width', ply[n_ply].width + '%');

      if ( ply[0].width == 0 || ply[1].width == 0 ){
        game = false;
        alert('joc finalitzat!');
      }
    }

    //ready
    Zepto(function($){
      init();
      $('.p_ply').on('click', function(){
        if ( game == true )
          ditada($(this));
        else {
          if(confirm('Vols iniciar un altre joc?')){
            init();
          }
        }
      });



      console.log('Ready to Zepto!');
    })
    </script>

  </body>
</html>
